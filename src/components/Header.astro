---
const currentPath = Astro.url.pathname;
const base = import.meta.env.BASE_URL;
---

<header 
  id="header" 
  data-theme="light" 
  data-component="Header"
  data-astro-transition-persist="header"
>
  <div class="grid container-menu">
    <nav class="nav-container">
      <div class="menu-links-w">
        <ul>
          <li>
            <a href={`${base}`} class={`nav-link ${currentPath === base || currentPath === base.slice(0, -1) ? 'active' : ''}`}>
              <span>Home</span>
            </a>
          </li>
          <li>
            <a href={`${base}about`} class={`nav-link ${currentPath === `${base}about` || currentPath === `${base}about/` ? 'active' : ''}`}>
              <span>About</span>
            </a>
          </li>
          <li>
            <a href={`${base}experience`} class={`nav-link ${currentPath === `${base}experience` || currentPath === `${base}experience/` ? 'active' : ''}`}>
              <span>Experience</span>
            </a>
          </li>
          <li>
            <a href={`${base}projects`} class={`nav-link ${currentPath === `${base}projects` || currentPath === `${base}projects/` ? 'active' : ''}`}>
              <span>Projects</span>
            </a>
          </li>
          <li>
            <a href={`${base}contact`} class={`nav-link ${currentPath === `${base}contact` || currentPath === `${base}contact/` ? 'active' : ''}`}>
              <span>Contact</span>
            </a>
          </li>
        </ul>
        <div class="navbar"></div>
      </div>
      <button class="menu-toggle" id="menu-toggle" aria-label="Toggle menu">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
      </button>
    </nav>
  </div>
</header>

<div class="mobile-menu" id="mobile-menu">
  <nav class="mobile-menu-nav">
    <ul>
      <li>
        <a href={`${base}`} class={`mobile-nav-link ${currentPath === base || currentPath === base.slice(0, -1) ? 'active' : ''}`}>
          <span>Home</span>
        </a>
      </li>
      <li>
        <a href={`${base}about`} class={`mobile-nav-link ${currentPath === `${base}about` || currentPath === `${base}about/` ? 'active' : ''}`}>
          <span>About</span>
        </a>
      </li>
      <li>
        <a href={`${base}experience`} class={`mobile-nav-link ${currentPath === `${base}experience` || currentPath === `${base}experience/` ? 'active' : ''}`}>
          <span>Experience</span>
        </a>
      </li>
      <li>
        <a href={`${base}projects`} class={`mobile-nav-link ${currentPath === `${base}projects` || currentPath === `${base}projects/` ? 'active' : ''}`}>
          <span>Projects</span>
        </a>
      </li>
      <li>
        <a href={`${base}contact`} class={`mobile-nav-link ${currentPath === `${base}contact` || currentPath === `${base}contact/` ? 'active' : ''}`}>
          <span>Contact</span>
        </a>
      </li>
    </ul>
  </nav>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const menuToggle = document.getElementById('menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    const body = document.body;

    if (menuToggle && mobileMenu) {
      menuToggle.addEventListener('click', () => {
        mobileMenu.classList.toggle('active');
        menuToggle.classList.toggle('active');
        body.classList.toggle('menu-open');
      });

      // Close menu when clicking on a link
      const menuLinks = mobileMenu.querySelectorAll('.mobile-nav-link');
      menuLinks.forEach(link => {
        link.addEventListener('click', () => {
          mobileMenu.classList.remove('active');
          menuToggle.classList.remove('active');
          body.classList.remove('menu-open');
        });
      });

      // Close menu when clicking outside
      mobileMenu.addEventListener('click', (e) => {
        if (e.target === mobileMenu) {
          mobileMenu.classList.remove('active');
          menuToggle.classList.remove('active');
          body.classList.remove('menu-open');
        }
      });
    }
  });
</script>

